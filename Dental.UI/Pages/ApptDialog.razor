@inherits ApptDialogBase

@if (ShowDialog)
{
    <div class="modal fade show d-block" id="exampleModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="titleLabel">Make an Appointment</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" @onclick="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <EditForm Model="@Schedules">
                        <DataAnnotationsValidator />
                        <ValidationSummary />

                        <div class="form-group">
                            <label for="Years">Years: </label>
                            <InputSelect id="Years" class="form-control" @bind-Value="@YearSelected">
                                @foreach (var year in Years)
                                    {
                                    <option>@year</option>
                                    }
                            </InputSelect>
                        </div>
                        <div class="form-group">
                            <label for="Months">Months: </label>
                            <InputSelect id="Months" class="form-control" @bind-Value="@MonthSelected">
                                @foreach (var month in Months.Keys)
                                    {
                                    <option>@month</option>
                                    }
                            </InputSelect>
                        </div>
                        <div class="form-group">
                            <label for="DOW">Day of Week: </label>
                            <InputSelect id="DOW" class="form-control" @bind-Value="@DaySelected">
                                @foreach (var day in DayOfWeek.Keys)
                                    {
                                    <option>@day</option>
                                    }
                            </InputSelect>
                        </div>
                        <div class="form-group">
                            <label for="TOD">Time of Day: </label>
                            <InputSelect id="TOD" class="form-control" @bind-Value="@TODSelected">
                                @foreach (var time in TimeOfDay)
                                    {
                                    <option>@time</option>
                                    }
                            </InputSelect>
                        </div>
                        @if (Schedules != null)
                        {
                            <div class="form-group">
                                <label for="Appt">Appointment: </label>
                                <InputSelect id="TOD" class="form-control" @bind-Value="@ApptSelected">
                                    <option value="0">Select a Time</option>
                                    @foreach (var date in Schedules)
                                            {
                                        <option value="@date.Id">@date.Date.ToLongDateString() @date.Date.ToLongTimeString()</option>
                                            }
                                </InputSelect>
                            </div>
                        }
                        @if (YearSelected != "" && MonthSelected != "" && DaySelected != "" && TODSelected != "")
                        {
                            <button class="btn btn-secondary" @onclick="ProcessSelectHandler">Process</button>
                        }

                        @if (ApptSelected != "")
                        {
                            <button @onclick="HandleValidSubmit" class="btn btn-primary">Save</button>
                        }

                        <a class="btn btn-outline-primary" @onclick="@Close">Close</a>
                    </EditForm>
                    
                </div>
            </div>
        </div>
    </div>
}
